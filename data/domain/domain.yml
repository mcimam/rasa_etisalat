version: "3.1"

entities:
  - customer_email
  - customer_issue
  - customer_pin

slots:
  customer_email:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: customer_email
    
  customer_issue:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: customer_issue
        conditions:
        - active_loop: ticket_form
          requested_slot: customer_issue
      - type: from_text
        intent: inform
        conditions:
        - active_loop: ticket_form
          requested_slot: customer_issue

  customer_pin:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: customer_pin
        intent: inform_pin
        conditions:
        - active_loop: pin_form
          requested_slot: customer_pin


forms:
  ticket_form:
    required_slots:
      - customer_email
      - customer_issue

  pin_form:
    required_slots:
      - customer_email
      - customer_pin

intents:
  - affirm
  - ask_question
  - bot_challenge
  - create_ticket
  - deny
  - faq:
      is_retrieval_intent: true
  - goodbye
  - greet
  - inform
  - inform_pin
  - thank
  - request_personal_info
  - out_of_scope

actions:
  - action_default_fallback
  - action_submit_ticket
  - action_pin
  - utter_ask_customer_email
  - utter_ask_customer_issue
  - utter_faq
  - utter_greet
  - utter_goodbye
  - utter_out_of_scope
  - utter_thank
  - utter_ticket_slots

responses:
  utter_answer_question:
  - text: "Sure, I can help you with that."
  - text: "What specific question do you have?"
  - text: "Please provide more details about your question."

  utter_ask_rephrase:
  - text: I'm sorry, I didn't quite understand that. Could you rephrase?

  utter_ask_customer_email:
    - text: "Could you please provide your email address?"
    - text: "Could you share your email ?"
    - text: "May I have your email address?"
  
  utter_ask_customer_issue:
    - text: "Could you describe your issue ?"
    - text: "Please provide details about the issue you're facing."
    - text: "Can you tell me more about the problem?"

  utter_ask_customer_pin:
    - text: "Please provide your PIN."
    - text: "Can you share your PIN?"
    - text: "May I have your PIN?"

  utter_greet:
  - text: "Hello! How can I assist you today?"

  utter_goodbye:
  - text: "Bye! Have a nice day!"

  utter_out_of_scope:
  - text: "I'm sorry, I can't assist with that request."

  utter_ticket_slots:
  - text: "Here are the details of ticket you provided:\n- Email: {customer_email}"

  utter_thank:
  - text: "You're welcome!"
  - text: "No problem!"
  - text: "Glad I could help!"
  - text: "Anytime!"
  - text: "Happy to assist!"


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

